<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>John Chandler Burnham - Notes (HPFP 07/31): More functional patterns</title>
        <link rel="stylesheet" type="text/css" href="../../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="navigation">
                <a href="../../">jcb</a>
                <a href="../../posts.html">posts</a>
                <a href="../../projects.html">projects</a>
                <a href="https://github.com/johnchandlerburnham">github</a>
                <a href="https://twitter.com/John_C_Burnham">twitter</a>
            </div>
        </div>
        <div id="content">
            <h1>Notes (HPFP 07/31): More functional patterns</h1>
          <div id="title" class="info">
    Posted on November  1, 2017
    
        by jcb
    
<hr>
</div>

<h1 id="more-functional-patterns">7 More functional patterns</h1>
<h2 id="arguments-and-parameters">7.2 Arguments and parameters</h2>
<p>This section is best understood in the context of the lambda calculus. I recommend reading at least <a href="../../posts/workthrough-lambda-calculus-rojas.html#definition">chapter 1 of my notes on Rojas’ Introduction to the Lambda Calculus</a>.</p>
<h2 id="anonymous-functions">7.3 Anonymous functions</h2>
<h3 id="exercises-grab-bag">Exercises: Grab bag</h3>
<ol type="1">
<li>They are all equivalent</li>
<li>d</li>
<li><ol type="a">
<li><code>f = \x -&gt; x + 1</code></li>
<li><code>addFive = \x -&gt; \y -&gt; (min x y) + 5</code></li>
<li><code>mflip f x y = f y x</code></li>
</ol></li>
</ol>
<h2 id="pattern-matching">7.4 Pattern matching</h2>
<p>From <a href="https://github.com/johnchandlerburnham/hpffp-resources/blob/master/Chapter-02/How%20to%20desugar%20Haskell%20code.pdf">Gonzalez’s “How to Desugar Haskell Code”</a></p>
<blockquote>
<p>Pattern matching on constructors desugars to case statements:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1">f (<span class="dt">Left</span>  l) <span class="fu">=</span> eL</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">f (<span class="dt">Right</span> r) <span class="fu">=</span> eR</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">-- ... desugars to:</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">f x <span class="fu">=</span> <span class="kw">case</span> x <span class="kw">of</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">    <span class="dt">Left</span>  l <span class="ot">-&gt;</span> eL</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    <span class="dt">Right</span> r <span class="ot">-&gt;</span> eR</a></code></pre></div>
<p>Pattern matching on numeric or string literals desugars to equality tests:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1">f <span class="dv">0</span> <span class="fu">=</span> e0</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">f _ <span class="fu">=</span> e1</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">-- ... desugars to:</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">f x <span class="fu">=</span> <span class="kw">if</span> x <span class="fu">==</span> <span class="dv">0</span> <span class="kw">then</span> e0 <span class="kw">else</span> e1</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">-- ... desugars to:</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">f x <span class="fu">=</span> <span class="kw">case</span> x <span class="fu">==</span> <span class="dv">0</span> <span class="kw">of</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">    <span class="dt">True</span>  <span class="ot">-&gt;</span> e0</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    <span class="dt">False</span> <span class="ot">-&gt;</span> e1</a></code></pre></div>
</blockquote>
<h3 id="exercises-variety-pack">Exercises: Variety Pack</h3>
<ol type="1">
<li><ol type="a">
<li><code>k :: (a, b) -&gt; a</code></li>
<li><code>k2</code> is a <code>String</code>, not the same as <code>k1</code> or <code>k3</code></li>
<li><code>k1</code> and <code>k3</code></li>
</ol></li>
<li><code>f (a, b, c) (d, e, f) = ((a, d), (c, f))</code></li>
</ol>
<h2 id="case-expressions">7.5 Case expressions</h2>
<h3 id="exercises-case-practice">Exercises: Case Practice</h3>
<ol type="1">
<li><div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1">functionC x y <span class="fu">=</span> <span class="kw">case</span> (x <span class="fu">&gt;</span> y) <span class="kw">of</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="dt">True</span> <span class="ot">-&gt;</span> x</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="dt">False</span> <span class="ot">-&gt;</span> y</a></code></pre></div></li>
<li><div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" data-line-number="1">ifEvenAdd2 n <span class="fu">=</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="kw">case</span> even n</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">    <span class="dt">True</span> <span class="ot">-&gt;</span> (n <span class="fu">+</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="dt">False</span> <span class="ot">-&gt;</span> n</a></code></pre></div></li>
<li><div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" data-line-number="1">nums x <span class="fu">=</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="kw">case</span> compare x <span class="dv">0</span> <span class="kw">of</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="dt">LT</span> <span class="ot">-&gt;</span> <span class="fu">-</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="dt">GT</span> <span class="ot">-&gt;</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="dt">EQ</span> <span class="ot">-&gt;</span> <span class="dv">0</span></a></code></pre></div></li>
</ol>
<h2 id="higher-order-functions">7.6 Higher-order functions</h2>
<h3 id="exercises-artful-dodgy">Exercises: Artful Dodgy</h3>
<ol start="2" type="1">
<li><code>11</code></li>
<li><code>22</code></li>
<li><code>21</code></li>
<li><code>12</code></li>
<li><code>11</code></li>
<li><code>21</code></li>
<li><code>21</code></li>
<li><code>22</code></li>
<li><code>31</code></li>
<li><code>23</code></li>
</ol>
<h2 id="guards">7.7 Guards</h2>
<h3 id="exercises-guard-duty">Exercises: Guard Duty</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">--07/AvgGrade.hs</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">module</span> <span class="dt">AvgGrade</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="ot">avgGrade ::</span> (<span class="dt">Fractional</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Char</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">avgGrade x</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  <span class="fu">|</span> y <span class="fu">&gt;=</span> <span class="fl">0.7</span> <span class="fu">=</span> <span class="ch">'C'</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  <span class="fu">|</span> y <span class="fu">&gt;=</span> <span class="fl">0.9</span> <span class="fu">=</span> <span class="ch">'A'</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">  <span class="fu">|</span> y <span class="fu">&gt;=</span> <span class="fl">0.8</span> <span class="fu">=</span> <span class="ch">'B'</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9">  <span class="fu">|</span> y <span class="fu">&gt;=</span> <span class="fl">0.59</span> <span class="fu">=</span> <span class="ch">'D'</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">  <span class="fu">|</span> otherwise <span class="fu">=</span> <span class="ch">'F'</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12">    y <span class="fu">=</span> x <span class="fu">/</span> <span class="dv">100</span></a></code></pre></div>
<ol type="1">
<li>Can’t do otherwise if theres no wise to other.</li>
<li>No, because the conditions are not exclusive.</li>
<li>b</li>
<li>anything reversible, so lists</li>
<li><code>[a] -&gt; Bool</code></li>
<li>c</li>
<li><code>(Ord a, Num a) =&gt; a</code></li>
<li><code>(Ord a, Num a) =&gt; a -&gt; Bool</code></li>
</ol>
<h2 id="chapter-exercises">7.11 Chapter Exercises</h2>
<h3 id="multiple-choice">Multiple Choice</h3>
<ol type="1">
<li>d</li>
<li>b</li>
<li>a</li>
<li>b</li>
<li>a</li>
</ol>
<h3 id="lets-write-code">Let’s write code</h3>
<ol type="1">
<li><ol type="a">
<li><p><code>tensDigit x = (flip mod) 10 $ fst $ divMod x 10</code></p>
<p>Seems silly to use <code>divMod</code>, when</p>
<p><code>tensDigit' x = (flip mod) 10 $ div x 10</code></p>
<p>works perfectly well.</p></li>
<li><p>Yup.</p></li>
<li><p>Well let’s do this properly:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">-- 07/Digit.hs</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="ot">baseDigit ::</span> <span class="dt">Integral</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Maybe</span> a</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">baseDigit base digit x</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  <span class="fu">|</span> base <span class="fu">==</span> <span class="dv">0</span> <span class="fu">=</span> <span class="dt">Nothing</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  <span class="fu">|</span> digit <span class="fu">&lt;</span> <span class="dv">0</span> <span class="fu">=</span> <span class="dt">Nothing</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  <span class="fu">|</span> otherwise <span class="fu">=</span> <span class="dt">Just</span> <span class="fu">$</span> (flip mod) base <span class="fu">$</span> div x (base <span class="fu">^</span> digit)</a></code></pre></div>
<p>So that</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="fu">*</span><span class="dt">Main</span><span class="fu">&gt;</span> baseDigit <span class="dv">10</span> <span class="dv">2</span> <span class="dv">1234</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="dt">Just</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="fu">*</span><span class="dt">Main</span><span class="fu">&gt;</span> baseDigit <span class="dv">10</span> <span class="dv">2</span> <span class="dv">123456</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="dt">Just</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="fu">*</span><span class="dt">Main</span><span class="fu">&gt;</span> baseDigit <span class="dv">10</span> <span class="dv">2</span> <span class="dv">9876543210</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="dt">Just</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="fu">*</span><span class="dt">Main</span><span class="fu">&gt;</span></a></code></pre></div></li>
</ol></li>
<li><div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">-- 07/FoldBool.hs</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="ot">foldBool ::</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">foldBool x y b <span class="fu">=</span> <span class="kw">case</span> b <span class="kw">of</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">   <span class="dt">True</span> <span class="ot">-&gt;</span> x</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">   <span class="dt">False</span> <span class="ot">-&gt;</span> y</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="ot">foldBool2 ::</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">foldBool2 x y b</a>
<a class="sourceLine" id="cb9-10" data-line-number="10"> <span class="fu">|</span> b <span class="fu">==</span> <span class="dt">True</span> <span class="fu">=</span> x</a>
<a class="sourceLine" id="cb9-11" data-line-number="11"> <span class="fu">|</span> b <span class="fu">==</span> <span class="dt">False</span> <span class="fu">=</span> y</a></code></pre></div></li>
<li><p><code>g f (a, b) = (f a, b)</code></p></li>
<li><div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">-- 07/arith4.hs</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="ot">roundTrip ::</span> (<span class="dt">Show</span> a, <span class="dt">Read</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">roundTrip a <span class="fu">=</span> read (show a)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="ot">roundTripPF ::</span> (<span class="dt">Show</span> a, <span class="dt">Read</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">roundTripPF <span class="fu">=</span> (read <span class="fu">.</span> show)</a>
<a class="sourceLine" id="cb10-8" data-line-number="8"></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="ot">roundTrip2 ::</span> (<span class="dt">Show</span> a, <span class="dt">Read</span> b) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> b</a>
<a class="sourceLine" id="cb10-10" data-line-number="10">roundTrip2 a <span class="fu">=</span> read (show a)</a>
<a class="sourceLine" id="cb10-11" data-line-number="11"></a>
<a class="sourceLine" id="cb10-12" data-line-number="12">main <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13">  print (roundTrip2 (<span class="dv">4</span><span class="ot"> ::</span> <span class="dt">Int</span>))</a>
<a class="sourceLine" id="cb10-14" data-line-number="14">  print (id <span class="dv">4</span>)</a></code></pre></div></li>
</ol>
<h2 id="follow-up-resources">7.13 Follow-up resources</h2>
<ol type="1">
<li><p><a href="https://github.com/johnchandlerburnham/hpffp-resources/blob/master/Chapter-07/Case%20Expressions%20and%20Pattern%20Matching.pdf">Paul Hudak; John Peterson; Joseph Fasel. A Gentle Introduction to Haskell, chapter on case expressions and pattern matching.</a></p></li>
<li><p><a href="https://github.com/johnchandlerburnham/hpffp-resources/blob/master/Chapter-07/The%20Implementation%20of%20Functional%20Programming%20Languages.pdf">Simon Peyton Jones. The Implementation of Functional Programming Languages, pages 53-103.</a></p></li>
<li><a href="https://github.com/johnchandlerburnham/hpffp-resources/blob/master/Chapter-07/Fundamental%20Concepts%20in%20Programming%20Languages.pdf">Christopher Strachey. Fundamental Concepts in Programming Languages, page 11 for explanation of currying.</a></li>
<li><a href="http://www.di.uminho.pt/~jno/ps/iscalc_1.ps.gz">J.N. Oliveira. An introduction to pointfree programming.</a></li>
<li><p><a href="https://github.com/johnchandlerburnham/hpffp-resources/blob/master/Chapter-07/Point-free%20Program%20Calculation.pdf">Manuel Alcino Pereira da Cunha. Point-free Program Calculation.</a></p></li>
</ol>
<hr />

        </div>
        <div id="footer">
          <p>&copy; <script>document.write(new Date().getFullYear());</script>
             John Chandler Burnham.
            Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
          </p>
        </div>
    </body>
</html>
