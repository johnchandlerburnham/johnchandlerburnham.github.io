<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>John Chandler Burnham - Notes (HPFP 08/31): Recursion</title>
        <link rel="stylesheet" type="text/css" href="../../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="navigation">
                <a href="../../">jcb</a>
                <a href="../../posts.html">posts</a>
                <a href="../../projects.html">projects</a>
                <a href="https://github.com/johnchandlerburnham">github</a>
                <a href="https://twitter.com/John_C_Burnham">twitter</a>
            </div>
        </div>
        <div id="content">
            <h1>Notes (HPFP 08/31): Recursion</h1>
          <div id="title" class="info">
    Posted on November  1, 2017
    
        by jcb
    
<hr>
</div>

<h1 id="recursion">8 Recursion</h1>
<h2 id="factorial">8.2 Factorial</h2>
<h2 id="intermission-exercise">Intermission: Exercise</h2>
<pre><code>applyTimes 5 (+1) 5</code></pre>
<p>turns into</p>
<pre><code>((+1) . (+1) . (+1) . (+1) . (+1)) 5</code></pre>
<h2 id="chapter-exercises">8.6 Chapter Exercises</h2>
<h3 id="review-of-types">Review of types</h3>
<ol type="1">
<li>d</li>
<li>b</li>
<li>d</li>
<li>b</li>
</ol>
<h3 id="reviewing-currying">Reviewing currying</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="ot">flippy ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="ot">appedCatty ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="ot">frappe ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">String</span></a></code></pre></div>
<ol type="1">
<li><code>&quot;woops mrow woohoo&quot;</code></li>
<li><code>&quot;1 mrow haha&quot;</code></li>
<li><code>&quot;woops mrow 2 mrow haha&quot;</code></li>
<li><code>&quot;woops mrow blue mrow haha&quot;</code></li>
<li><code>&quot;pink mrow haha mrow green mrow woops mrow blue&quot;</code></li>
<li><code>&quot;are mrow Pugs mrow awesome&quot;</code></li>
</ol>
<h3 id="recursion-1">Recursion</h3>
<ol type="1">
<li><pre><code>dividedBy 15 2 -&gt;
go 15 2 0 -&gt;
go 13 2 1 -&gt;
go 11 2 2 -&gt;
go 9 2 3 -&gt;
go 7 2 4 -&gt;
go 5 2 5 -&gt;
go 3 2 6 -&gt;
go 1 2 7 -&gt;
(7, 1)</code></pre></li>
<li><div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">-- 08/rsum.hs</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="ot">rsum ::</span> (<span class="dt">Eq</span> a, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">rsum n <span class="fu">=</span> go n <span class="dv">0</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    go n c</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">     <span class="fu">|</span> n <span class="fu">==</span> <span class="dv">0</span> <span class="fu">=</span> c</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">     <span class="fu">|</span> otherwise <span class="fu">=</span> go (n <span class="fu">-</span> <span class="dv">1</span>) (c <span class="fu">+</span> n)</a></code></pre></div></li>
<li><div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">-- 08/rmult.hs</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="ot">rmult ::</span> (<span class="dt">Integral</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">rmult a b <span class="fu">=</span> go a b <span class="dv">0</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">    go a b c</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">     <span class="fu">|</span> b <span class="fu">==</span> <span class="dv">0</span> <span class="fu">=</span> c</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">     <span class="fu">|</span> otherwise <span class="fu">=</span> go a (b <span class="fu">-</span> <span class="dv">1</span>) (c <span class="fu">+</span> a)</a></code></pre></div></li>
</ol>
<h3 id="fixing-dividedby">Fixing dividedBy:</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">-- 08/DividedBy.hs</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">module</span> <span class="dt">DividedBy</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="ot">unsafeDividedBy ::</span> <span class="dt">Integral</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> (a, a)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">unsafeDividedBy num denom <span class="fu">=</span> go num denom <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    go n d count</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">      <span class="fu">|</span> n <span class="fu">&lt;</span> d <span class="fu">=</span> (count, n)</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">      <span class="fu">|</span> otherwise <span class="fu">=</span> go (n <span class="fu">-</span> d) d (count <span class="fu">+</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-10" data-line-number="10"></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">-- div throws an exception on zero</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="ot">partialDividedBy ::</span> <span class="dt">Integral</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> (a, a)</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">partialDividedBy num denom <span class="fu">=</span> go num denom <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15">    go n d count</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">      <span class="fu">|</span> n <span class="fu">&lt;</span> d <span class="fu">=</span> (count, n)</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">      <span class="fu">|</span> d <span class="fu">&lt;</span> <span class="dv">0</span> <span class="fu">=</span> go n (negate d) count</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">      <span class="fu">|</span> d <span class="fu">==</span> <span class="dv">0</span> <span class="fu">=</span> error <span class="fu">$</span> <span class="st">&quot;can't div by zero&quot;</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19">      <span class="fu">|</span> otherwise <span class="fu">=</span> go (n <span class="fu">-</span> d) d (count <span class="fu">+</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-20" data-line-number="20"></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="kw">data</span> <span class="dt">DividedResult</span> <span class="fu">=</span> <span class="dt">Result</span> <span class="dt">Integer</span> <span class="fu">|</span> <span class="dt">DividedByZero</span> <span class="kw">deriving</span> (<span class="dt">Eq</span>, <span class="dt">Show</span>)</a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">-- equivalent to Maybe Integer</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="ot">dividedBy ::</span> <span class="dt">Integral</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a<span class="ot">-&gt;</span> <span class="dt">DividedResult</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26">dividedBy num denom <span class="fu">=</span> go num denom <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27">  <span class="kw">where</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28">    resNeg (<span class="dt">Result</span> x) <span class="fu">=</span> <span class="dt">Result</span> (negate x)</a>
<a class="sourceLine" id="cb7-29" data-line-number="29">    go n d count</a>
<a class="sourceLine" id="cb7-30" data-line-number="30">      <span class="fu">|</span> d <span class="fu">==</span> <span class="dv">0</span> <span class="fu">=</span> <span class="dt">DividedByZero</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31">      <span class="fu">|</span> d <span class="fu">&lt;</span> <span class="dv">0</span> <span class="fu">=</span> resNeg <span class="fu">$</span> go n (negate d) count</a>
<a class="sourceLine" id="cb7-32" data-line-number="32">      <span class="fu">|</span> n <span class="fu">&lt;</span> <span class="dv">0</span> <span class="fu">=</span> resNeg <span class="fu">$</span> go (negate n) d count</a>
<a class="sourceLine" id="cb7-33" data-line-number="33">      <span class="fu">|</span> n <span class="fu">&lt;</span> d <span class="fu">=</span> <span class="dt">Result</span> count</a>
<a class="sourceLine" id="cb7-34" data-line-number="34">      <span class="fu">|</span> otherwise <span class="fu">=</span> go (n <span class="fu">-</span> d) d (count <span class="fu">+</span> <span class="dv">1</span>)</a></code></pre></div>
<h3 id="mccarthy-91-function">McCarthy 91 function:</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">-- 08/mccarthy91.hs</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="ot">mc91 ::</span> <span class="dt">Integral</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">mc91 n</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  <span class="fu">|</span> n <span class="fu">&gt;</span> <span class="dv">100</span> <span class="fu">=</span> n <span class="fu">-</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">  <span class="fu">|</span> otherwise <span class="fu">=</span> (mc91 <span class="fu">.</span> mc91) (n <span class="fu">+</span> <span class="dv">11</span>)</a></code></pre></div>
<h3 id="numbers-into-words">Numbers into Words:</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">-- 08/WordNumber.hs</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">module</span> <span class="dt">WordNumber</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">import</span> <span class="dt">Data.List</span> (intersperse)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="ot">digitToWord ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7">digitToWord x <span class="fu">=</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8">  <span class="kw">case</span> x <span class="kw">of</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9">    <span class="dv">1</span> <span class="ot">-&gt;</span> <span class="st">&quot;one&quot;</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10">    <span class="dv">2</span> <span class="ot">-&gt;</span> <span class="st">&quot;two&quot;</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11">    <span class="dv">3</span> <span class="ot">-&gt;</span> <span class="st">&quot;three&quot;</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12">    <span class="dv">4</span> <span class="ot">-&gt;</span> <span class="st">&quot;four&quot;</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13">    <span class="dv">5</span> <span class="ot">-&gt;</span> <span class="st">&quot;five&quot;</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14">    <span class="dv">6</span> <span class="ot">-&gt;</span> <span class="st">&quot;six&quot;</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15">    <span class="dv">7</span> <span class="ot">-&gt;</span> <span class="st">&quot;seven&quot;</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16">    <span class="dv">8</span> <span class="ot">-&gt;</span> <span class="st">&quot;eight&quot;</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17">    <span class="dv">9</span> <span class="ot">-&gt;</span> <span class="st">&quot;nine&quot;</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">    <span class="dv">0</span> <span class="ot">-&gt;</span> <span class="st">&quot;zero&quot;</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19">    _ <span class="ot">-&gt;</span> <span class="st">&quot;NaD&quot;</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="ot">digits ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> [<span class="dt">Int</span>]</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">digits n <span class="fu">=</span> go n []</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">  <span class="kw">where</span> go n d</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">          <span class="fu">|</span> n <span class="fu">&lt;</span> <span class="dv">10</span> <span class="fu">=</span> n<span class="fu">:</span>d</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">          <span class="fu">|</span> n <span class="fu">&gt;=</span> <span class="dv">10</span> <span class="fu">=</span> go (n <span class="ot">`div`</span> <span class="dv">10</span>) <span class="fu">$</span> (n <span class="ot">`mod`</span> <span class="dv">10</span>)<span class="fu">:</span>d</a>
<a class="sourceLine" id="cb9-26" data-line-number="26"></a>
<a class="sourceLine" id="cb9-27" data-line-number="27"><span class="ot">wordNumber ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb9-28" data-line-number="28">wordNumber n <span class="fu">=</span> concat <span class="fu">$</span> intersperse <span class="st">&quot;-&quot;</span> <span class="fu">$</span> map digitToWord <span class="fu">$</span> digits n</a></code></pre></div>
<hr />

        </div>
        <div id="footer">
          <p>&copy; <script>document.write(new Date().getFullYear());</script>
             John Chandler Burnham.
            Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
          </p>
        </div>
    </body>
</html>
