<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>John Chandler Burnham - Notes (HPFP 14/31): Testing</title>
        <link rel="stylesheet" type="text/css" href="../../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="navigation">
                <a href="../../">jcb</a>
                <a href="../../posts.html">posts</a>
                <a href="../../projects.html">projects</a>
                <a href="https://github.com/johnchandlerburnham">github</a>
                <a href="https://twitter.com/John_C_Burnham">twitter</a>
            </div>
        </div>
        <div id="content">
            <h1>Notes (HPFP 14/31): Testing</h1>
          <div id="title" class="info">
    Posted on November  1, 2017
    
        by jcb
    
<hr>
</div>

<h1 id="testing">14 Testing</h1>
<h2 id="intermission-short-exercise">Intermission: Short Exercise</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">-- /14/addition/Addition.hs</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">module</span> <span class="dt">Addition</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">import</span> <span class="dt">Test.Hspec</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">import</span> <span class="dt">Test.QuickCheck</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">main <span class="fu">=</span> hspec <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  describe <span class="st">&quot;Addition&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    it <span class="st">&quot;1 + 1 is greater than 1&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">      (<span class="dv">1</span> <span class="fu">+</span> <span class="dv">1</span>) <span class="fu">&gt;</span> <span class="dv">1</span> <span class="ot">`shouldBe`</span> <span class="dt">True</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">    it <span class="st">&quot;2 + 2 is equal to 4&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13">      <span class="dv">2</span> <span class="fu">+</span> <span class="dv">2</span> <span class="ot">`shouldBe`</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14">    it <span class="st">&quot;x + 1 is always greater than x&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15">      property <span class="fu">$</span> \x <span class="ot">-&gt;</span> x <span class="fu">+</span> <span class="dv">1</span> <span class="fu">&gt;</span> (<span class="ot">x ::</span> <span class="dt">Int</span>)</a>
<a class="sourceLine" id="cb1-16" data-line-number="16">  describe <span class="st">&quot;Division&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17">    it <span class="st">&quot;15 divided by 3 is 5&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18">      dividedBy <span class="dv">15</span> <span class="dv">3</span> <span class="ot">`shouldBe`</span> (<span class="dv">5</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb1-19" data-line-number="19">    it <span class="st">&quot;22 divided by 5 is 4 remainder 2&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20">      dividedBy <span class="dv">22</span> <span class="dv">5</span> <span class="ot">`shouldBe`</span> (<span class="dv">4</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1-21" data-line-number="21">  describe <span class="st">&quot;Multiplication&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22">    it <span class="st">&quot;1 * 1 is 1&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23">      rMult <span class="dv">1</span> <span class="dv">1</span> <span class="ot">`shouldBe`</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24">    it <span class="st">&quot;2 * 2 is 4&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25">      rMult <span class="dv">2</span> <span class="dv">2</span> <span class="ot">`shouldBe`</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26">    it <span class="st">&quot;2 * 0 is 0&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27">      rMult <span class="dv">2</span> <span class="dv">0</span> <span class="ot">`shouldBe`</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28">    it <span class="st">&quot;0 * 2 is 0&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29">      rMult <span class="dv">0</span> <span class="dv">2</span> <span class="ot">`shouldBe`</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30">    it <span class="st">&quot;0 * 0 is 0&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31">      rMult <span class="dv">0</span> <span class="dv">0</span> <span class="ot">`shouldBe`</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-32" data-line-number="32">    it <span class="st">&quot;3 * 4 is 12&quot;</span> <span class="fu">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-33" data-line-number="33">      rMult <span class="dv">3</span> <span class="dv">4</span> <span class="ot">`shouldBe`</span> <span class="dv">12</span></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"></a>
<a class="sourceLine" id="cb1-35" data-line-number="35"><span class="ot">dividedBy ::</span> <span class="dt">Integral</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> (a, a)</a>
<a class="sourceLine" id="cb1-36" data-line-number="36">dividedBy num denom <span class="fu">=</span> go num denom <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-37" data-line-number="37">  <span class="kw">where</span> go n d count</a>
<a class="sourceLine" id="cb1-38" data-line-number="38">         <span class="fu">|</span> n <span class="fu">&lt;</span> d <span class="fu">=</span> (count, n)</a>
<a class="sourceLine" id="cb1-39" data-line-number="39">         <span class="fu">|</span> otherwise <span class="fu">=</span> go (n <span class="fu">-</span> d) d (count <span class="fu">+</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1-40" data-line-number="40"></a>
<a class="sourceLine" id="cb1-41" data-line-number="41"></a>
<a class="sourceLine" id="cb1-42" data-line-number="42"><span class="ot">rMult ::</span> (<span class="dt">Integral</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb1-43" data-line-number="43">rMult a b <span class="fu">=</span> go a b <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-44" data-line-number="44">  <span class="kw">where</span> go a b c</a>
<a class="sourceLine" id="cb1-45" data-line-number="45">          <span class="fu">|</span> b <span class="fu">==</span> <span class="dv">0</span> <span class="fu">=</span> c</a>
<a class="sourceLine" id="cb1-46" data-line-number="46">          <span class="fu">|</span> otherwise <span class="fu">=</span> go a (b <span class="fu">-</span> <span class="dv">1</span>) (c <span class="fu">+</span> a)</a>
<a class="sourceLine" id="cb1-47" data-line-number="47"></a>
<a class="sourceLine" id="cb1-48" data-line-number="48"><span class="ot">sayHello ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb1-49" data-line-number="49">sayHello <span class="fu">=</span> putStrLn <span class="st">&quot;hello!&quot;</span></a></code></pre></div>
<h2 id="chapter-exercises">14.7 Chapter Exercises</h2>
<h3 id="validating-numbers-into-words">Validating numbers into words</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">-- 14/exercises/test/Spec.hs</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">module</span> <span class="dt">ExercisesTest</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">WordNumberTest</span> <span class="kw">as</span> <span class="dt">WN</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Exercises</span> <span class="kw">as</span> <span class="dt">EX</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="kw">import</span> <span class="dt">Data.Char</span> (toUpper)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw">import</span> <span class="dt">Data.List</span> (sort)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="kw">import</span> <span class="dt">Test.QuickCheck</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">-- 1</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="ot">halfIdentity ::</span> <span class="dt">Fractional</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">halfIdentity <span class="fu">=</span> (<span class="fu">*</span><span class="dv">2</span>) <span class="fu">.</span> EX.half</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="ot">prop_twiceHalf ::</span> (<span class="dt">Eq</span> a, <span class="dt">Fractional</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15">prop_twiceHalf n <span class="fu">=</span> (halfIdentity n) <span class="fu">==</span> n</a>
<a class="sourceLine" id="cb2-16" data-line-number="16"></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">--2</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="ot">listOrdered ::</span>  (<span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19">listOrdered xs <span class="fu">=</span> snd <span class="fu">$</span> foldr go (<span class="dt">Nothing</span>, <span class="dt">True</span>) xs <span class="kw">where</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20">  go _ status<span class="fu">@</span>(_ , <span class="dt">False</span>) <span class="fu">=</span> status</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">  go y (<span class="dt">Nothing</span>, t) <span class="fu">=</span> (<span class="dt">Just</span> y, t)</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">  go y (<span class="dt">Just</span> x, t) <span class="fu">=</span> (<span class="dt">Just</span> y, x <span class="fu">&gt;=</span> y)</a>
<a class="sourceLine" id="cb2-23" data-line-number="23"></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="ot">prop_sort ::</span> (<span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25">prop_sort <span class="fu">=</span> listOrdered <span class="fu">.</span> sort</a>
<a class="sourceLine" id="cb2-26" data-line-number="26"></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">-- 3</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="ot">plusAssociative ::</span> (<span class="dt">Eq</span> a, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29">plusAssociative x y z <span class="fu">=</span> x <span class="fu">+</span> (y <span class="fu">+</span> z) <span class="fu">==</span> (x <span class="fu">+</span> y) <span class="fu">+</span> z</a>
<a class="sourceLine" id="cb2-30" data-line-number="30"></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="ot">plusCommutative ::</span> (<span class="dt">Eq</span> a, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32">plusCommutative x y <span class="fu">=</span> x <span class="fu">+</span> y <span class="fu">==</span> y <span class="fu">+</span> x</a>
<a class="sourceLine" id="cb2-33" data-line-number="33"></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="co">-- 4</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35"><span class="ot">multAssociative ::</span> (<span class="dt">Eq</span> a, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36">multAssociative x y z <span class="fu">=</span> x <span class="fu">+</span> (y <span class="fu">+</span> z) <span class="fu">==</span> (x <span class="fu">+</span> y) <span class="fu">+</span> z</a>
<a class="sourceLine" id="cb2-37" data-line-number="37"></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"><span class="ot">multCommutative ::</span> (<span class="dt">Eq</span> a, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-39" data-line-number="39">multCommutative x y <span class="fu">=</span> x <span class="fu">+</span> y <span class="fu">==</span> y <span class="fu">+</span> x</a>
<a class="sourceLine" id="cb2-40" data-line-number="40"></a>
<a class="sourceLine" id="cb2-41" data-line-number="41"><span class="co">-- 5</span></a>
<a class="sourceLine" id="cb2-42" data-line-number="42"><span class="ot">quotRemRule ::</span> <span class="dt">Integral</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-43" data-line-number="43">quotRemRule x y <span class="fu">=</span> (quot x y)<span class="fu">*</span>y <span class="fu">+</span> (rem x y) <span class="fu">==</span> x</a>
<a class="sourceLine" id="cb2-44" data-line-number="44"></a>
<a class="sourceLine" id="cb2-45" data-line-number="45"><span class="ot">divModRule ::</span> <span class="dt">Integral</span> a <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-46" data-line-number="46">divModRule x y <span class="fu">=</span> (quot x y)<span class="fu">*</span>y <span class="fu">+</span> (rem x y) <span class="fu">==</span> x</a>
<a class="sourceLine" id="cb2-47" data-line-number="47"></a>
<a class="sourceLine" id="cb2-48" data-line-number="48"><span class="co">-- 6</span></a>
<a class="sourceLine" id="cb2-49" data-line-number="49"><span class="ot">expAssociative ::</span> (<span class="dt">Num</span> a, <span class="dt">Integral</span> a, <span class="dt">Eq</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-50" data-line-number="50">expAssociative x y z <span class="fu">=</span> (x <span class="fu">^</span> y) <span class="fu">^</span> z <span class="fu">==</span> x <span class="fu">^</span> (y <span class="fu">^</span> z)</a>
<a class="sourceLine" id="cb2-51" data-line-number="51"></a>
<a class="sourceLine" id="cb2-52" data-line-number="52"><span class="ot">expCommutative ::</span> (<span class="dt">Num</span> a, <span class="dt">Integral</span> a, <span class="dt">Eq</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-53" data-line-number="53">expCommutative x y <span class="fu">=</span> x <span class="fu">^</span> y <span class="fu">==</span> y <span class="fu">^</span> x</a>
<a class="sourceLine" id="cb2-54" data-line-number="54"></a>
<a class="sourceLine" id="cb2-55" data-line-number="55"><span class="co">-- 7</span></a>
<a class="sourceLine" id="cb2-56" data-line-number="56"><span class="ot">listReverse ::</span> (<span class="dt">Eq</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-57" data-line-number="57">listReverse list <span class="fu">=</span> (reverse <span class="fu">.</span> reverse) list <span class="fu">==</span> list</a>
<a class="sourceLine" id="cb2-58" data-line-number="58"></a>
<a class="sourceLine" id="cb2-59" data-line-number="59"><span class="co">-- 8</span></a>
<a class="sourceLine" id="cb2-60" data-line-number="60"><span class="ot">prop_apply ::</span> (<span class="dt">Eq</span> b) <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-61" data-line-number="61">prop_apply f x <span class="fu">=</span> (f <span class="fu">$</span> x) <span class="fu">==</span> (f x)</a>
<a class="sourceLine" id="cb2-62" data-line-number="62"></a>
<a class="sourceLine" id="cb2-63" data-line-number="63"><span class="ot">prop_compose ::</span> (<span class="dt">Eq</span> c) <span class="ot">=&gt;</span> (b <span class="ot">-&gt;</span> c) <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-64" data-line-number="64">prop_compose f g x <span class="fu">=</span> (f <span class="fu">.</span> g) x <span class="fu">==</span> f (g x)</a>
<a class="sourceLine" id="cb2-65" data-line-number="65"></a>
<a class="sourceLine" id="cb2-66" data-line-number="66"><span class="kw">instance</span> <span class="dt">Show</span> (a <span class="ot">-&gt;</span> b) <span class="kw">where</span> show _ <span class="fu">=</span> <span class="st">&quot;Arbitrary Function&quot;</span></a>
<a class="sourceLine" id="cb2-67" data-line-number="67"></a>
<a class="sourceLine" id="cb2-68" data-line-number="68"><span class="co">-- 9</span></a>
<a class="sourceLine" id="cb2-69" data-line-number="69"><span class="ot">prop_compareCons ::</span> (<span class="dt">Eq</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-70" data-line-number="70">prop_compareCons xs ys <span class="fu">=</span> foldr (<span class="fu">:</span>) xs ys <span class="fu">==</span> (<span class="fu">++</span>) xs ys</a>
<a class="sourceLine" id="cb2-71" data-line-number="71"></a>
<a class="sourceLine" id="cb2-72" data-line-number="72"><span class="ot">prop_compareCons' ::</span> (<span class="dt">Eq</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-73" data-line-number="73">prop_compareCons' xs ys <span class="fu">=</span> foldr (<span class="fu">:</span>) xs ys <span class="fu">==</span> (flip (<span class="fu">++</span>)) xs ys</a>
<a class="sourceLine" id="cb2-74" data-line-number="74"></a>
<a class="sourceLine" id="cb2-75" data-line-number="75"><span class="ot">prop_compareConcat ::</span> (<span class="dt">Eq</span> a, <span class="dt">Foldable</span> t) <span class="ot">=&gt;</span> t [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-76" data-line-number="76">prop_compareConcat xs <span class="fu">=</span> foldr (<span class="fu">++</span>) [] xs <span class="fu">==</span> concat xs</a>
<a class="sourceLine" id="cb2-77" data-line-number="77"></a>
<a class="sourceLine" id="cb2-78" data-line-number="78"><span class="co">-- 10</span></a>
<a class="sourceLine" id="cb2-79" data-line-number="79"><span class="ot">prop_take ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> [b] <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-80" data-line-number="80">prop_take n xs <span class="fu">=</span> length (take n xs) <span class="fu">==</span> n</a>
<a class="sourceLine" id="cb2-81" data-line-number="81"></a>
<a class="sourceLine" id="cb2-82" data-line-number="82"><span class="co">-- 11</span></a>
<a class="sourceLine" id="cb2-83" data-line-number="83"><span class="ot">prop_read ::</span> (<span class="dt">Eq</span> a, <span class="dt">Show</span> a, <span class="dt">Read</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-84" data-line-number="84">prop_read x <span class="fu">=</span> (read (show x)) <span class="fu">==</span> x</a>
<a class="sourceLine" id="cb2-85" data-line-number="85"></a>
<a class="sourceLine" id="cb2-86" data-line-number="86"><span class="co">-- Idempotence</span></a>
<a class="sourceLine" id="cb2-87" data-line-number="87">twice f <span class="fu">=</span> f <span class="fu">.</span> f</a>
<a class="sourceLine" id="cb2-88" data-line-number="88">fourTimes <span class="fu">=</span> twice <span class="fu">.</span> twice</a>
<a class="sourceLine" id="cb2-89" data-line-number="89"></a>
<a class="sourceLine" id="cb2-90" data-line-number="90"><span class="ot">idem1 ::</span>  <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-91" data-line-number="91">idem1 x <span class="fu">=</span> (capw x <span class="fu">==</span> twice capw x) <span class="fu">&amp;&amp;</span> (capw x <span class="fu">==</span> fourTimes capw x) <span class="kw">where</span></a>
<a class="sourceLine" id="cb2-92" data-line-number="92">  capw (x<span class="fu">:</span>xs) <span class="fu">=</span> (toUpper x) <span class="fu">:</span> xs</a>
<a class="sourceLine" id="cb2-93" data-line-number="93">  capw [] <span class="fu">=</span> []</a>
<a class="sourceLine" id="cb2-94" data-line-number="94"></a>
<a class="sourceLine" id="cb2-95" data-line-number="95"><span class="ot">idem2 ::</span> (<span class="dt">Eq</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb2-96" data-line-number="96">idem2 x <span class="fu">=</span> (sort x <span class="fu">==</span> twice sort x) <span class="fu">&amp;&amp;</span> (sort x <span class="fu">==</span> fourTimes sort x)</a>
<a class="sourceLine" id="cb2-97" data-line-number="97"></a>
<a class="sourceLine" id="cb2-98" data-line-number="98"><span class="co">-- Make a Gen</span></a>
<a class="sourceLine" id="cb2-99" data-line-number="99"><span class="kw">data</span> <span class="dt">Fool</span> <span class="fu">=</span> <span class="dt">Fulse</span> <span class="fu">|</span> <span class="dt">Frue</span> <span class="kw">deriving</span> (<span class="dt">Eq</span>, <span class="dt">Show</span>)</a>
<a class="sourceLine" id="cb2-100" data-line-number="100"></a>
<a class="sourceLine" id="cb2-101" data-line-number="101"><span class="kw">instance</span> <span class="dt">Arbitrary</span> <span class="dt">Fool</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb2-102" data-line-number="102">  arbitrary <span class="fu">=</span> frequency [(<span class="dv">1</span>, return <span class="dt">Fulse</span>), (<span class="dv">1</span>, return <span class="dt">Frue</span>)]</a>
<a class="sourceLine" id="cb2-103" data-line-number="103"></a>
<a class="sourceLine" id="cb2-104" data-line-number="104"><span class="ot">foolGen ::</span> <span class="dt">Gen</span> <span class="dt">Fool</span></a>
<a class="sourceLine" id="cb2-105" data-line-number="105">foolGen <span class="fu">=</span> arbitrary</a>
<a class="sourceLine" id="cb2-106" data-line-number="106"></a>
<a class="sourceLine" id="cb2-107" data-line-number="107"><span class="ot">fulsishFoolGen ::</span> <span class="dt">Gen</span> <span class="dt">Fool</span></a>
<a class="sourceLine" id="cb2-108" data-line-number="108">fulsishFoolGen <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-109" data-line-number="109">  a <span class="ot">&lt;-</span> arbitrary</a>
<a class="sourceLine" id="cb2-110" data-line-number="110">  frequency [(<span class="dv">2</span>, return a), (<span class="dv">1</span>, return a)]</a>
<a class="sourceLine" id="cb2-111" data-line-number="111"></a>
<a class="sourceLine" id="cb2-112" data-line-number="112"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb2-113" data-line-number="113">main <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb2-114" data-line-number="114">  WN.main</a>
<a class="sourceLine" id="cb2-115" data-line-number="115">  quickCheck (<span class="ot">prop_twiceHalf ::</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-116" data-line-number="116">  quickCheck (<span class="ot">prop_sort ::</span> [<span class="dt">Int</span>] <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-117" data-line-number="117">  quickCheck (<span class="ot">plusAssociative ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-118" data-line-number="118">  quickCheck (<span class="ot">plusCommutative ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-119" data-line-number="119">  quickCheck (<span class="ot">multAssociative ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-120" data-line-number="120">  quickCheck (<span class="ot">multCommutative ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-121" data-line-number="121">  quickCheck (<span class="ot">quotRemRule ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-122" data-line-number="122">  quickCheck (<span class="ot">divModRule ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-123" data-line-number="123">  quickCheck (<span class="ot">expAssociative ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-124" data-line-number="124">  quickCheck (<span class="ot">expCommutative ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-125" data-line-number="125">  quickCheck (<span class="ot">listReverse ::</span> [<span class="dt">Char</span>] <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-126" data-line-number="126">  quickCheck (<span class="ot">prop_apply ::</span> (<span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span>) <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-127" data-line-number="127">  quickCheck (<span class="ot">prop_compose ::</span> (<span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span>) <span class="ot">-&gt;</span> (<span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span>) <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-128" data-line-number="128">  quickCheck (<span class="ot">prop_compareCons ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-129" data-line-number="129">  quickCheck (<span class="ot">prop_compareCons' ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-130" data-line-number="130">  quickCheck (<span class="ot">prop_compareConcat ::</span> [<span class="dt">String</span>] <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-131" data-line-number="131">  quickCheck (<span class="ot">prop_take ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-132" data-line-number="132">  quickCheck (<span class="ot">prop_read ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a>
<a class="sourceLine" id="cb2-133" data-line-number="133">  quickCheck idem1</a>
<a class="sourceLine" id="cb2-134" data-line-number="134">  quickCheck (<span class="ot">idem2 ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>)</a></code></pre></div>
<h3 id="using-quickcheck">Using QuickCheck</h3>
<p>see <code>14/exercises/test/Spec.hs</code></p>
<h3 id="failure">Failure</h3>
<p>Irrational numbers like e.g. the sqaure root of 2 cannot be represented with infinite precision in a finite amount of memory. So an expression like (sqrt 2) is not actually equal to the square root of 2, but rather is an accurate approximation to some precision. So even though square is the inverse of square root, because sqrt cannot be infinitely accurate the square of a square root will have some error. E.g.</p>
<pre><code>sqrt 2 = 1.4142135, (sqrt 2) ^ 2 = 1.9999999</code></pre>
<h3 id="idempotence">Idempotence</h3>
<p>see <code>14/exercises/test/Spec.hs</code></p>
<h3 id="make-a-gen-random-generator-for-the-datatype">Make a Gen random generator for the datatype</h3>
<p>see <code>14/exercises/test/Spec.hs</code></p>
<h3 id="hangman-testing">Hangman testing</h3>
<h3 id="validating-ciphers">Validating ciphers</h3>
<p>skipping these, I think that this testing chapter is probably better understood after you understand what monads are. The reader here only barely has the tools to build something for which testing is important.</p>
<h2 id="follow-up-resources">14.9 Follow-up resources</h2>
<ol type="1">
<li><a href="https://www.fpcomplete.com/user/pbv/an-introduction-to-quickcheck-testing">Pedro Vasconcelos; An introduction to QuickCheck testing;</a></li>
<li>Koen Claessen and John Hughes; (2000) QuickCheck: A Lightweight Tool for Random Testing of Haskell Programs</li>
<li><a href="http://www.dcc.fc.up.pt/dcc/Pubs/TReports/TR13/dcc-2013-06.pdf">Pedro Vasconcelos;Verifying a Simple Compiler Using Property-based Random Testing;</a></li>
</ol>
<hr />

        </div>
        <div id="footer">
          <p>&copy; <script>document.write(new Date().getFullYear());</script>
             John Chandler Burnham.
            Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
          </p>
        </div>
    </body>
</html>
